# ==============================
# Airflow configurations
# ==============================
# Airflow UID (run 'id -u' on Linux/macOS to get your user ID)
AIRFLOW_UID=50000
# Airflow database
AIRFLOW_POSTGRES_USER=airflow
AIRFLOW_POSTGRES_PASSWORD=airflow
AIRFLOW_POSTGRES_DB=airflow
AIRFLOW_POSTGRES_PORT=5434
# Airflow web UI credentials
AIRFLOW_WWW_USER_USERNAME=airflow
AIRFLOW_WWW_USER_PASSWORD=airflow
# Airflow ports
AIRFLOW_WEBSERVER_PORT=8080
AIRFLOW_FLOWER_PORT=5555
# Additional pip requirements (leave empty for production, use for quick tests only)
_PIP_ADDITIONAL_REQUIREMENTS=

# ==============================
# PostgreSQL db configurations
# ==============================
# Accidents database
ACCIDENTS_POSTGRES_USER=postgres
ACCIDENTS_POSTGRES_PASSWORD=postgres
ACCIDENTS_POSTGRES_DB=accidents_db
ACCIDENTS_POSTGRES_PORT=5432
# MLflow database
MLFLOW_POSTGRES_USER=mlflow_user
MLFLOW_POSTGRES_PASSWORD=mlflow_password
MLFLOW_POSTGRES_DB=mlflow_db
MLFLOW_POSTGRES_PORT=5433

# ==============================
# MinIO configurations
# ==============================
MINIO_ROOT_USER=minio_user
MINIO_ROOT_PASSWORD=minio_password
MINIO_BUCKET_NAME=mlflow
MINIO_PORT=9000
MINIO_CONSOLE_PORT=9001

# ==============================
# MLflow configurations
# ==============================
MLFLOW_BACKEND_STORE_URI=postgresql://${MLFLOW_POSTGRES_USER}:${MLFLOW_POSTGRES_PASSWORD}@mlflow_db:5432/${MLFLOW_POSTGRES_DB}
MLFLOW_ARTIFACTS_DESTINATION=s3://${MINIO_BUCKET_NAME}
# S3 endpoint for MLflow container (uses Docker network hostname with hyphen for DNS compatibility)
MLFLOW_S3_ENDPOINT_URL=http://mlflow-minio:9000
MLFLOW_PORT=5001

# ==============================
# Data ingestion configuration
# ==============================
DATASET_NAME=ahmedlahlou/accidents-in-france-from-2005
RAW_DATA_PATH=data/raw/

# ==============================
# Monitoring configurations
# ==============================
# Prometheus
PROMETHEUS_PORT=9090

# Grafana
GRAFANA_PORT=3000
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin

# Alertmanager
ALERTMANAGER_PORT=9093

# ==============================
# Email Alert Configuration
# ==============================
# SMTP Server Settings (example: Gmail)
# For Gmail: smtp.gmail.com:587
# For Outlook: smtp-mail.outlook.com:587
# For SendGrid: smtp.sendgrid.net:587
ALERTMANAGER_SMTP_HOST=smtp.gmail.com
ALERTMANAGER_SMTP_PORT=587
ALERTMANAGER_SMTP_USER=your-email@gmail.com
ALERTMANAGER_SMTP_PASSWORD=your-app-password

# Email Addresses
# From address (must match SMTP user)
ALERTMANAGER_EMAIL_FROM=mlops-alerts@your-domain.com

# Default recipient (fallback for all alerts)
ALERTMANAGER_EMAIL_TO=team@your-domain.com

# Critical alerts recipient (paged immediately)
ALERTMANAGER_EMAIL_CRITICAL=oncall@your-domain.com

# Warning alerts recipient
ALERTMANAGER_EMAIL_WARNING=team@your-domain.com

# Team-specific recipients
ALERTMANAGER_EMAIL_DATA_TEAM=data-team@your-domain.com
ALERTMANAGER_EMAIL_ML_TEAM=ml-team@your-domain.com
ALERTMANAGER_EMAIL_OPS_TEAM=ops-team@your-domain.com

# ==============================
# API & Streamlit configurations
# ==============================
API_PORT=8000
STREAMLIT_PORT=8501

# ==============================
# API security - OAuth2 
# ==============================

SECRET_KEY=change-me-in-production
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=60
